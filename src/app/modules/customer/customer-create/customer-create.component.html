<div class="row">
  <div class="d-flex align-items-center pe-0">
    <div class="d-flex align-items-center justify-content-between w-100 pe-4">
      <h3 class="fs-9 mb-0 text-nowrap py-2 py-xl-0">{{ isSelectedData ? 'View Customer' : 'Add New Customer' }}</h3>
      @if(containsCustomerView) {
        @if (isReadOnly) {
          <div class="d-flex cursor-pointer btn p-0" (click)="isReadOnly = !isReadOnly">
            <svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512"
              preserveAspectRatio="xMidYMid meet">
              <g transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)" fill="currentColor" stroke="none">
                <path d="M3720 4629 c-145 -22 -268 -78 -393 -179 -40 -32 -637 -624 -1329
                      -1316 l-1256 -1259 -15 -70 c-210 -975 -249 -1167 -243 -1200 9 -46 57 -101
                      103 -116 19 -6 54 -9 77 -6 30 4 983 207 1186 252 27 7 2526 2496 2609 2600
                      279 349 224 860 -121 1131 -169 132 -408 195 -618 163z m223 -324 c243 -51
                      410 -294 369 -537 -23 -139 -59 -193 -275 -413 l-192 -196 -340 341 -340 340
                      201 200 c174 174 209 204 266 229 110 50 197 60 311 36z m-688 -1736 c-198
                      -198 -628 -625 -955 -949 l-596 -588 -423 -91 c-233 -50 -425 -90 -427 -88 -1
                      1 38 194 88 427 l90 425 951 953 952 952 340 -340 340 -340 -360 -361z" />
              </g>
            </svg>
          </div>
        }

        @if (!isReadOnly) {
          <div class="d-flex cursor-pointer btn p-0" (click)="isReadOnly = !isReadOnly">
            <svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
              viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet">
              <g transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)" fill="currentColor" stroke="none">
                <path d="M540 4668 c-25 -14 -58 -44 -75 -67 -27 -39 -30 -50 -30 -120 0 -68
                       3 -82 27 -117 15 -21 899 -910 1965 -1975 1590 -1589 1945 -1939 1977 -1949
                       95 -30 201 5 255 86 30 43 39 133 21 190 -10 32 -360 387 -1949 1977 -1065
                       1066 -1953 1950 -1975 1964 -56 40 -153 44 -216 11z" />
                <path d="M3643 4585 c-138 -25 -294 -94 -385 -170 -18 -15 -239 -226 -491
                       -469 -315 -304 -464 -454 -477 -482 -67 -137 39 -305 192 -304 76 1 115 28
                       332 239 115 110 213 201 217 201 4 0 139 -136 300 -302 l292 -303 -206 -200
                       c-135 -131 -212 -214 -222 -238 -55 -132 32 -283 170 -295 108 -9 104 -12 599
                       467 248 241 472 464 498 496 59 73 120 195 150 300 19 68 23 102 22 225 0 128
                       -4 156 -27 233 -49 159 -115 265 -240 383 -195 186 -462 267 -724 219z m331
                       -458 c89 -45 155 -112 199 -205 30 -63 32 -74 32 -177 0 -103 -2 -114 -32
                       -178 -25 -52 -57 -93 -136 -174 l-103 -105 -298 308 -298 308 89 87 c152 147
                       227 182 381 175 82 -3 101 -7 166 -39z" />
                <path d="M1611 2815 c-57 -33 -595 -556 -610 -593 -25 -64 -341 -1262 -341
                       -1296 0 -107 98 -206 205 -206 63 0 1289 284 1325 307 57 36 629 595 646 631
                       31 65 30 124 -1 188 -48 97 -147 140 -251 109 -46 -13 -78 -41 -328 -282
                       l-278 -268 -401 -93 c-220 -51 -401 -91 -403 -90 -1 2 46 182 105 400 l106
                       398 245 235 c145 139 254 252 268 277 48 90 20 209 -66 271 -36 26 -54 32
                       -110 35 -57 2 -73 -1 -111 -23z" />
              </g>
            </svg>
          </div>
       }
      }
    </div>
  </div>
</div>
<div class="my-4">
  <form [formGroup]="customerForm" (ngSubmit)="onSubmit()">
    <div class="px-4 py-3 bg-white rounded-3">
      <div class="accordion mb-3" id="accordionExample1">
        <div class="accordion-item border-0">
          <h2 class="accordion-header d-inline-block" id="heading1">
            <button class="accordion-button px-0 py-1 my-1 fw-medium" type="button" data-bs-toggle="collapse"
              data-bs-target="#collapse1" aria-expanded="true" aria-controls="collapse1">Customer Information</button>
          </h2>
          <div class="accordion-collapse collapse show" id="collapse1" aria-labelledby="heading1"
            data-bs-parent="#accordionExample1">
            <div class="accordion-body py-0" formGroupName="customerDetails">
              <div class="row">
                <div class="col-12 col-sm-6">
                  <label>First name</label>
                  <input type="text" class="form-control" formControlName="firstName" [readonly]="isReadOnly" [class.disabled]="isReadOnly">
                </div>
                <div class="col-12 col-sm-6">
                  <label>Last name</label>
                  <input type="text" class="form-control" formControlName="lastName" [readonly]="isReadOnly" [class.disabled]="isReadOnly">
                </div>
              </div>

              <div class="row mt-2">
                <div class="col-12 col-sm-6">
                  <label>Phone Number</label>
                  <input type="tel" class="form-control" formControlName="phoneNumber" [readonly]="isReadOnly" [class.disabled]="isReadOnly">
                </div>
                <div class="col-12 col-sm-6">
                  <label>Email*</label>
                  <input type="text" class="form-control" formControlName="email" [readonly]="isReadOnly" [class.disabled]="isReadOnly">
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>
      <div class="accordion mb-3" id="accordionExample2">
        <div class="accordion-item">
          <h2 class="accordion-header d-inline-block" id="heading2">
            <button class="accordion-button px-0 py-1 my-1 fw-medium" type="button" data-bs-toggle="collapse"
              data-bs-target="#collapse2" aria-expanded="true" aria-controls="collapse2">Address
              Information</button>
          </h2>
          <div class="accordion-collapse collapse show" id="collapse2" aria-labelledby="heading2"
            data-bs-parent="#accordionExample2">
            <div class="accordion-body py-0" formGroupName="addressDetails">

              <div class="row">
                <div class="col-12 col-sm-6">
                  <label>Street Address</label>
                  <input type="text" class="form-control" formControlName="street" [readonly]="isReadOnly" [class.disabled]="isReadOnly">
                </div>
                <div class="col-12 col-sm-6">
                  <label>Street Address 2</label>
                  <input type="text" class="form-control" formControlName="street2" [readonly]="isReadOnly" [class.disabled]="isReadOnly">
                </div>
              </div>

              <div class="row mt-2">
                <div class="col-12 col-sm-6">
                  <label>Country</label>
                  <select class="form-select" aria-label="Default select example" formControlName="country"  [class.disabled]="isReadOnly">
                    <option selected>United States</option>
                  </select>
                </div>

                <div class="col-12 col-sm-6">
                  <label>State</label>
                  <select class="form-select" aria-label="Default select example" formControlName="state"  [class.disabled]="isReadOnly">
                    @for (state of states; track state; let i = $index) {
                    <option [value]="state">{{ state }}</option>
                    }
                  </select>
                </div>

              </div>

              <div class="row mt-2">
                <div class="col-12 col-sm-6">
                  <label>City</label>
                  <select class="form-select" aria-label="Default select example" formControlName="city"  [class.disabled]="isReadOnly">
                    @for (city of cities; track city; let i = $index) {
                    <option [value]="city">{{ city }}</option>
                    }
                  </select>
                  <!-- <input type="text" class="form-control" formControlName="city"> -->
                </div>

                <div class="col-12 col-sm-6">
                  <label>Postal Code</label>
                  <input type="text" class="form-control" formControlName="zip" [readonly]="isReadOnly" [class.disabled]="isReadOnly">
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>
      <div class="accordion mb-3" id="accordionExample3">
        <div class="accordion-item">
          <h2 class="accordion-header d-inline-block" id="heading3">
            <button class="accordion-button show px-0 py-1 my-1 fw-medium" type="button" data-bs-toggle="collapse"
              data-bs-target="#collapse3" aria-expanded="true" aria-controls="collapse3">License
              Information</button>
          </h2>
          <div class="accordion-collapse collapse show" id="collapse3" aria-labelledby="heading3"
            data-bs-parent="#accordionExample3">
            <div class="accordion-body py-0" formGroupName="licenseDetails">
              <div class="row">
                <div class="col-12 col-sm-4">
                  <label>License Number</label>
                  <input type="text" class="form-control" formControlName="licenseNumber" [readonly]="isReadOnly" [class.disabled]="isReadOnly">
                </div>
                <div class="col-12 col-sm-4">
                  <label>State</label>
                  <input type="text" class="form-control" formControlName="state" [readonly]="isReadOnly" [class.disabled]="isReadOnly">
                </div>
                <div class="col-12 col-sm-4">
                  <label>Expiry Date</label>
                  <input type="date" class="form-control" formControlName="endDate" [readonly]="isReadOnly" [class.disabled]="isReadOnly">
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>
      <div class="accordion mb-3" id="accordionExample4">
        <div class="accordion-item">
          <h2 class="accordion-header d-inline-block" id="heading4">
            <button class="accordion-button show px-0 py-1 my-1 fw-medium" type="button" data-bs-toggle="collapse"
              data-bs-target="#collapse4" aria-expanded="true" aria-controls="collapse4">Saved Credit Card</button>
          </h2>
          <div class="accordion-collapse collapse show" id="collapse4" aria-labelledby="heading4"
            data-bs-parent="#accordionExample4">
            <div class="accordion-body py-0" formGroupName="savedCreditCard">
              <div class="row">
                <div class="col-12 col-sm-4">
                  <label>Card Type</label>
                  <select class="form-select" formControlName="cardType"  [class.disabled]="isReadOnly" [class.disabled]="isReadOnly">
                    <option value="American Express">American Express</option>
                    <option value="Visa">Visa</option>
                    <option value="Master card">Master card</option>
                  </select>
                </div>
                <div class="col-12 col-sm-4">
                  <label>Card Number</label>
                  <input type="text" class="form-control" formControlName="cardNumber" [readonly]="isReadOnly" [class.disabled]="isReadOnly">
                </div>
                <div class="col-12 col-sm-4">
                  <label>Expiry Date</label>
                  <input type="month" class="form-control" formControlName="expiryDate" [readonly]="isReadOnly" [class.disabled]="isReadOnly">
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      @if(containsCustomerView) {
      <div class="accordion mb-3" id="accordionExample5">
        <div class="accordion-item">
          <h2 class="accordion-header d-inline-block" id="heading4">
            <button class="accordion-button show px-0 py-1 my-1 fw-medium" type="button" data-bs-toggle="collapse"
              data-bs-target="#collapse5" aria-expanded="true" aria-controls="collapse5">Reservation
              Information</button>
          </h2>
          <div class="accordion-collapse collapse show" id="collapse5" aria-labelledby="heading4"
            data-bs-parent="#accordionExample5">
            <div class="accordion-body py-0">
              <div class="row">
                <div class="col-12 col-md-6">
                  <h3 class="fs-6 fw-normal">Current Reservation</h3>
                  <div class="reservation-info">
                    <table class="table">
                      <tbody>
                        <tr>
                          <td>
                            <a href="#" class="text-decoration-none">R-23125</a>
                          </td>
                          <td>
                            <p class="mb-0">Pickup : 12-02-2023</p>
                          </td>
                          <td>
                            <p class="mb-0">Dropoff : 12-02-2023</p>
                          </td>
                        </tr>
                        <tr>
                          <td>
                            <a href="#" class="text-decoration-none">R-23125</a>
                          </td>
                          <td>
                            <p class="mb-0">Pickup : 12-02-2023</p>
                          </td>
                          <td>
                            <p class="mb-0">Dropoff : 12-02-2023</p>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>

                <div class="col-12 col-md-6">
                  <h3 class="fs-6 fw-normal">Past Reservation</h3>
                  <div class="reservation-info">
                    <table class="table">
                      <tbody>
                        <tr>
                          <td>
                            <a href="#" class="text-decoration-none">R-23125</a>
                          </td>
                          <td>
                            <p class="mb-0">Pickup : 12-02-2023</p>
                          </td>
                          <td>
                            <p class="mb-0">Dropoff : 12-02-2023</p>
                          </td>
                        </tr>
                        <tr>
                          <td>
                            <a href="#" class="text-decoration-none">R-23125</a>
                          </td>
                          <td>
                            <p class="mb-0">Pickup : 12-02-2023</p>
                          </td>
                          <td>
                            <p class="mb-0">Dropoff : 12-02-2023</p>
                          </td>
                        </tr>
                        <tr>
                          <td>
                            <a href="#" class="text-decoration-none">R-23125</a>
                          </td>
                          <td>
                            <p class="mb-0">Pickup : 12-02-2023</p>
                          </td>
                          <td>
                            <p class="mb-0">Dropoff : 12-02-2023</p>
                          </td>
                        </tr>
                        <tr>
                          <td>
                            <a href="#" class="text-decoration-none">R-23125</a>
                          </td>
                          <td>
                            <p class="mb-0">Pickup : 12-02-2023</p>
                          </td>
                          <td>
                            <p class="mb-0">Dropoff : 12-02-2023</p>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
    }

    </div>
    @if(!isSelectedData) {
    <div class="card-footer d-flex justify-content-between mt-4 mb-3">
      <button [routerLink]="['/customer/list']" class="btn btn-tranparent outline-0">Cancel</button>
      <button class="btn btn-secondary" type="submit" [disabled]="customerForm.invalid">Save Customer</button>
    </div>
    }
  </form>
</div>
